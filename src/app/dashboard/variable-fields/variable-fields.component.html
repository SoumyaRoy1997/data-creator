<ng-container>
    <table mat-table [dataSource]="dataSource" multiTemplateDataRows matSort class="table table-striped"
        [formGroup]="variableFieldGroupForm">
        <ng-container matColumnDef="checkFlag">
            <th mat-header-cell *matHeaderCellDef>
                <mat-checkbox (change)="$event ? toggleAllRows() : null"
                    [checked]="selection.hasValue() && isAllSelected()"
                    [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
                </mat-checkbox>
            </th>
            <td mat-cell *matCellDef="let row">
                <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                    [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)">
                </mat-checkbox>
            </td>
        </ng-container>
        <ng-container matColumnDef="Column Index">
            <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Column Index
            </th>
            <td mat-cell *matCellDef="let variableField" style="text-align: center !important;">
                {{variableField.columnIndex}}
            </td>
        </ng-container>
        <ng-container matColumnDef="Column Name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Column Name
            </th>
            <td mat-cell *matCellDef="let variableField" style="text-align: left !important;">
                {{variableField.columnName}}</td>
        </ng-container>
        <ng-container matColumnDef="Column Type" [formGroupName]="'variableFormRecords'">
            <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Column Type
            </th>
            <td mat-cell *matCellDef="let variableField;" [trackBy]="trackByIndex"
                [formGroupName]="variableField.formControlIndex">
                <mat-form-field appearance="outline" style="width: 80%;margin-top:0 !important;" >
                    <mat-label>Column Type</mat-label>
                    <!-- (change)="(expandedElement = expandedElement === variableField ? null : variableField); $event.stopPropagation()" -->
                    <mat-select [formControlName]="'columnType'" [disabled]="!selection.isSelected(variableField)">
                        <mat-option *ngFor="let columnType of columnTypes" [value]="columnType.value" (click)="expandedElement = expandedElement === variableField ? null : variableField" [class.example-expanded-row]="expandedElement === variableField">
                            {{columnType.columnType}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </td>
        </ng-container>
        <ng-container matColumnDef="Column Length" [formGroupName]="'variableFormRecords'">
            <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Column Length
            </th>
            <td mat-cell *matCellDef="let variableField" [formGroupName]="variableField.formControlIndex">
                <mat-form-field appearance="outline" style="width: 80%;margin-top:0 !important;" [disabled]="!selection.isSelected(variableField)">
                    <mat-label>Column Length</mat-label>
                    <input matInput #columnLength [formControlName]="'columnLength'" placeholder="Column Length" [disabled]="!selection.isSelected(variableField)">
                    <!-- formControlName="columnlength"> -->
                </mat-form-field>
            </td>
        </ng-container>
        <ng-container matColumnDef="domain" [formGroupName]="'variableFormRecords'">
            <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Email Domain
            </th>
            <td mat-cell *matCellDef="let variableField" [formGroupName]="variableField.formControlIndex">
                <mat-form-field appearance="outline" style="width: 80%;margin-top:0 !important;">
                    <mat-label>Email Domain</mat-label>
                    <input matInput #domain placeholder="Email Domain" [formControlName]="'domain'" [disabled]="!selection.isSelected(variableField)">
                    <!-- formControlName="domain"> -->
                </mat-form-field>
            </td>
        </ng-container>
        <ng-container matColumnDef="dateFormat" [formGroupName]="'variableFormRecords'">
            <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Date Format
            </th>
            <td mat-cell *matCellDef="let variableField" [formGroupName]="variableField.formControlIndex">
                <mat-form-field appearance="outline" style="width: 80%;margin-top:0 !important;">
                    <mat-label>Date Format</mat-label>
                    <input matInput placeholder="Date Format" [formControlName]="'dateFormat'" [disabled]="!selection.isSelected(variableField)">
                    <!-- formControlName="dateFormat"> -->
                </mat-form-field>
            </td>
        </ng-container>
        <ng-container matColumnDef="startDate" [formGroupName]="'variableFormRecords'">
            <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Start Date
            </th>
            <td mat-cell *matCellDef="let variableField" [formGroupName]="variableField.formControlIndex">
                <mat-form-field appearance="outline" style="width: 80%;margin-top:0 !important;">
                    <mat-label>Start Date</mat-label>
                    <input matInput placeholder="Start Date" [formControlName]="'startDate'" [disabled]="!selection.isSelected(variableField)">
                    <!-- formControlName="startDate"> -->
                </mat-form-field>
            </td>
        </ng-container>
        <ng-container matColumnDef="sampleData">
            <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Sample Data
            </th>
            <td mat-cell *matCellDef="let variableField" style="text-align: left !important;">
                {{variableField.sampleData}}</td>
        </ng-container>
        <ng-container matColumnDef="Actions">
            <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Actions
            </th>
            <td mat-cell *matCellDef="let variableField">
                <button mat-raised-button><i class="material-icons" style="cursor: pointer; color:green;"
                        (click)="saveVariableDetails(variableField.formControlIndex)">check</i></button>
            </td>
        </ng-container>
        <ng-container matColumnDef="expandedDetail">
            <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplayWithExpand.length">
                <div class="example-element-detail"
                    [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                    HI
                </div>
            </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;let index=index" class="example-element-row">
        </tr>
        <tr mat-row *matRowDef="let expandedrow; columns: ['expandedDetail']" class="example-detail-row"></tr>
    </table>
</ng-container>
<!-- formArrayName="variableFormRecords" formGroupName="row" -->

<!-- <ng-container [formGroup]="variableFieldGroupForm">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Column Index</th>
                <th>Column Name</th>
                <th>Column Type</th>
                <th>Column Length</th>
                <th>Email Domain</th>
                <th>Date Format</th>
                <th>Start Date</th>
                <th>Sample Data</th>
                <th>Save Details</th>
            </tr>
        </thead>
        <ng-container formArrayName="variableFormRecords">
            <tbody *ngFor="let i of variableFieldArray; let index=index" formGroupName="{{index}}">
                <tr>
                    <td>{{i.columnIndex}}</td>
                    <td>{{i.columnName}}</td>
                    <td>
                        <mat-form-field appearance="outline" style="width: 80%;margin-top:0 !important;"
                            [disabled]="!this.variableFieldGroupForm.get('variableFormRecords').get(index.toString()).get('checkFlag').value">
                            <mat-label>Column Type</mat-label>
                            <mat-select formControlName="columnType">
                                <mat-option *ngFor="let columnType of columnTypes" [value]="columnType.value">
                                    {{columnType.columnType}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </td>
                    <td>
                        <mat-form-field appearance="outline" style="width: 80%;margin-top:0 !important;">
                            <mat-label>Column Length</mat-label>
                            <input matInput #columnLength placeholder="Column Length" formControlName="columnLength">
                        </mat-form-field>
                    </td>
                    <td>
                        <mat-form-field appearance="outline" style="width: 80%;margin-top:0 !important;">
                            <mat-label>Email Domain</mat-label>
                            <input matInput #domain placeholder="Email Domain" formControlName="domain">
                        </mat-form-field>
                    </td>
                    <td>
                        <mat-form-field appearance="outline" style="width: 80%;margin-top:0 !important;">
                            <mat-label>Date Format</mat-label>
                            <input matInput placeholder="Date Format" formControlName="dateFormat">
                        </mat-form-field>
                    </td>
                    <td>
                        <mat-form-field appearance="outline" style="width: 80%;margin-top:0 !important;">
                            <mat-label>Start Date</mat-label>
                            <input matInput placeholder="Start Date" formControlName="startDate">
                        </mat-form-field>
                    </td>
                    <td>{{i.sampleData}}</td>
                    <td>
                        <button mat-raised-button><i class="material-icons" style="cursor: pointer; color:green;" (click)="saveVariableDetails(index)">check</i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </ng-container>
    </table>
</ng-container> -->
<mat-dialog-actions align="end">
    <button mat-button class="btn btn-success" color="primary" (click)="saveVariableRecords()">Save
        Variable Details</button>
    <button mat-button [mat-dialog-close]="editedVariableArray" class="btn btn-danger" color="primary">Quit</button>
</mat-dialog-actions>